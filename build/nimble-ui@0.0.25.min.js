(()=>{var w=Object.defineProperty,L=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var _=(n,e,t)=>e in n?w(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,v=(n,e)=>{for(var t in e||={})M.call(e,t)&&_(n,t,e[t]);if(P)for(var t of P(e))$.call(e,t)&&_(n,t,e[t]);return n},I=(n,e)=>L(n,O(e));var j=(n,e)=>{for(var t in e)w(n,t,{get:e[t],enumerable:!0})};var E={};j(E,{Lifecycle:()=>D,Prop:()=>K,Refresh:()=>S,State:()=>H});function K(n){return e=>()=>n(e.props())}function S(){return n=>()=>n.refresh()}function D(){return n=>n.on}function H(n){return e=>{let t=n;return{get value(){return t},set value(o){t=o,e.refresh()}}}}var R={};j(R,{_:()=>z,attr:()=>G,c:()=>Q,e:()=>F,each:()=>X,f:()=>k,on:()=>J,t:()=>B,when:()=>W});function B(n){return e=>e.text(n)}function z(n){return e=>e.dynamic(n)}function F(n,e=[],t=[]){return o=>o.element(n,e,t)}function G(n,e){return t=>t.attr(n,e)}function J(n,e){return t=>t.on(n,e)}function Q(n,e){return t=>t.component(n,e)}function k(n=[]){return e=>e.fragment(n)}function W(n,e,t=k()){return o=>o.when(n,e,t)}function X({items:n,trackBy:e=()=>(o,s)=>s},t){return o=>o.each(n,e,t)}function Y(n,e){return t=>t.text(n,e)}function Z(n,e,t){return o=>o.element(n,e,t)}function T(n,e){return n({text(t){return e({text(o){return t==o},element(){return!1}})},element(t,o){return e({text(){return!1},element(s,i){return t==s&&o==i}})}})}function q(n,e,t){let o=Object.keys(e),s=Object.keys(t),i=[...o,...s.filter(r=>!o.includes(r))];for(let r of i)s.includes(r)?o.includes(r)?t[r]!=e[r]&&n.setAttribute(r,t[r]):n.setAttribute(r,t[r]):(n.setAttribute(r,""),n.removeAttribute(r))}function U(n,e,t){let o=Object.keys(e),s=Object.keys(t),i=[...o,...s.filter(r=>!o.includes(r))];for(let r of i)s.includes(r)?o.includes(r)?t[r]!=e[r]&&(n.removeEventListener(r,e[r]),n.addEventListener(r,t[r])):n.addEventListener(r,t[r]):n.removeEventListener(r,e[r])}function N(n,e,t){let o=[];for(let s of e)if(t.length==0){o=[...o,...e];break}else T(s,t[0])?t=t.slice(1):o=[...o,s];for(let s of t)if(o.some(i=>T(i,s))){let i=o.findIndex(r=>T(r,s));o[i]({text(r,l){n.removeChild(l),n.appendChild(l)},element(r,l,p){n.removeChild(p),n.appendChild(p)}}),o=o.filter((r,l)=>l!=i)}else s({text(i,r){n.appendChild(r)},element(i,r,l){n.appendChild(l)}});o.forEach(s=>s({text(i,r){n.removeChild(r)},element(i,r,l){n.removeChild(l)}}))}var b=class{constructor(e,t){this.textContent=e;this.ID=t;this.txt=document.createTextNode(this.textContent)}getChildren(){return this.textContent?[Y(this.ID,this.txt)]:[]}setText(e){e!=this.textContent&&(this.textContent=e,this.txt.textContent=e)}},A=class{constructor(e,t){this.name=e;this.ID=t;this.el=document.createElement(this.name);this.children=[];this.attrs={};this.events={}}getChildren(){return[Z(this.ID,this.name,this.el)]}setChildren(e){let t=e.reduce((o,s)=>[...o,...s.getChildren()],[]);N(this.el,this.children,t),this.children=t}setAttributes(e){q(this.el,this.attrs,e),this.attrs=e}setEventListeners(e){U(this.el,this.events,e),this.events=e}},y=class{constructor(){this.children=[]}getChildren(){return this.children}setChildren(e){this.children=e.reduce((t,o)=>[...t,...o.getChildren()],[])}};function C(){}function x(n,e,t){return n({text(o){return{node:new b(o,e.join("_")),render:C,unmount:C}},dynamic(o){let s=new b(`${o()}`,e.join("_"));return{node:s,render(){s.setText(`${o()}`)},unmount:C}},element(o,s,i){let r=new A(o,e.join("_")),l=i.map((p,a)=>x(p,[`${a}`],t));return{node:r,render(){let p={},a={};s.forEach(u=>u({attr(d,m){let c=m();c==!0?p=I(v({},p),{[d]:d}):c&&(p=I(v({},p),{[d]:`${c}`}))},on(d,m){let c=m();c&&(a=I(v({},a),{[d]:c}))}})),r.setAttributes(p),r.setEventListeners(a),r.setChildren(l.map(u=>(u.render(),u.node)))},unmount(){for(let p of l)p.unmount()}}},component(o,s){let i=[],r=[];function l(){let f=r.map(g=>g()||(()=>{}));return()=>f.forEach(g=>g())}function p(){i.forEach(f=>f())}let a=s(),u=()=>{},d={props:()=>a,refresh:()=>u(),on:{mounted(f){r.push(f)},update(f){i.push(f)}},use:f=>f(d)},m=o(d.use),c=x(m,e,t),h=l();return u=t,{node:c.node,render(){a=s(),c.render(),p()},unmount(){h(),u=()=>{},c.unmount()}}},fragment(o){let s=o.map((r,l)=>x(r,[...e,`${l}`],t)),i=new y;return{node:i,render(){i.setChildren(s.map(r=>(r.render(),r.node)))},unmount(){for(let r of s)r.unmount()}}},when(o,s,i){let r=()=>!!o(),l=()=>x(s,[...e,"then"],t),p=()=>x(i,[...e,"else"],t),a=new y,u=r(),d=u?l():p();return{node:a,render(){let m=r();u!=m&&(d.unmount(),u=m,d=u?l():p()),d.render(),a.setChildren([d.node])},unmount(){d.unmount()}}},each(o,s,i){let r=()=>{let u=s(),d=o();return d.map((m,c)=>({item:m,id:`${u(m,c,d)}`}))},l=new y;class p{constructor(d,m,c){this.item=d;this.index=m;this.id=c;this.render=x(i(()=>this.item,()=>this.index,o),[...e,`item:${this.id}`],t)}}let a=[];return{node:l,render(){let u=r(),d=[],m=[];for(let c of a)if(u.length==0){d=[...d,...a];break}else u[0].id!=c.id?d=[...d,c]:(c.item=u[0].item,m=[...m,c],u=u.slice(1));for(let c of u)if(d.some(h=>h==c)){let h=d.findIndex(f=>f.id==c.id);m=[...m,d[h]],d=d.filter((f,g)=>g!=h)}else{let h=new p(c.item,m.length-1,c.id);m=[...m,h]}d.forEach(c=>c.render.unmount()),a=m,l.setChildren(a.map((c,h)=>(c.index=h,c.render.render(),c.render.node)))},unmount(){a.forEach(u=>u.render.unmount())}}}})}function V(n,e){let t=()=>{},o=[],s=x(n,[],()=>t());return t=()=>{s.render();let i=s.node.getChildren();N(e,o,i),o=i},t(),{update(){t()},unmount(){t=()=>{},s.unmount(),N(e,o,[])}}}var ee=I(v({},R),{middleware:E,mount:V}),ge=ee;})();
